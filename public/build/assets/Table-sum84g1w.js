import{r as l,j as e,y as m}from"./app-BPOq-aCu.js";import{n as g}from"./index-CpKdxSaf.js";import{u as N,D as S,f as u,c as w,g as C,a as y,b as R,d as M}from"./index-BppqkAjo.js";import{I as P}from"./index-BEfbAIe0.js";import"./iconBase-eZT6xShD.js";const a=w(),k=({initialUsers:x,success:n,fail:o})=>{var c;const[h,p]=l.useState([]),[i,b]=l.useState("");l.useEffect(()=>{n&&g.success(n,{duration:4e3})},[n]),l.useEffect(()=>{o&&g.error(o,{duration:4e3})},[o]);const f=(s,t)=>{s.preventDefault(),m.get(`/admin/user/${t}`)},j=(s,t,v)=>{s.preventDefault(),m.delete(`/admin/user/${t}`,{onBefore:()=>confirm(`${v}さんを削除してよろしいですか？`)})},d=l.useMemo(()=>[a.accessor("id",{header:"ID",size:25}),a.accessor("name",{header:"ユーザ名"}),a.accessor("english_name",{header:"店舗URL名"}),a.accessor("email",{header:"メールアドレス"}),a.accessor("first_password",{header:"初回パスワード"}),a.display({id:"Action",header:"Action",size:65,cell:({row:s})=>e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"font-medium text-blue-600 hover:bg-blue-500 hover:text-white mx-1 transiton-all duration-150 p-1 rounded",onClick:t=>f(t,s.original.id),children:"編集"}),e.jsx("button",{className:"font-medium text-red-600 hover:bg-red-500 hover:text-white mx-1 transiton-all duration-150 p-1 rounded",onClick:t=>j(t,s.original.id,s.original.name),children:"削除"})]})})],[]),r=N({data:x,columns:d,getCoreRowModel:C(),onSortingChange:p,getSortedRowModel:y(),getFilteredRowModel:R(),getPaginationRowModel:M(),state:{sorting:h,globalFilter:i},defaultColumn:{size:200}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-w-full w-11/12 mx-auto sm:px-6 lg:py-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"pb-3 px-6",children:[e.jsxs("div",{className:"flex justify-start items-center h-24",children:[e.jsx("div",{className:"h-12 bg-slate-600 px-2 rounded-l",children:e.jsx(P,{className:"h-full block text-white"})}),e.jsx("div",{className:"h-full flex justify-center items-center",children:e.jsx(S,{value:i??"",handleChange:s=>b(String(s)),className:"w-96 h-12 bg-transparent outline-none border rounded-r border-slate-300 focus:ring-0 focus:border-blue-500 placeholder:text-slate-400",placeholder:"検索"})})]}),e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-sm text-gray-700 bg-gray-200 ",children:r.getHeaderGroups().map(s=>e.jsx("tr",{children:s.headers.map(t=>e.jsx("th",{colSpan:t.colSpan,style:{maxWidth:t.getSize()},children:t.isPlaceholder?null:e.jsxs("div",{className:`
                                px-3 py-3
                                ${t.column.getCanSort()?"cursor-pointer select-none":""}`,onClick:t.column.getToggleSortingHandler(),title:t.column.getCanSort()?t.column.getNextSortingOrder()==="asc"?"Sort ascending":t.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:[u(t.column.columnDef.header,t.getContext()),{asc:"↑",desc:"↓"}[t.column.getIsSorted()]??null]})},t.id))},s.id))}),e.jsx("tbody",{children:(c=r.getRowModel().rows)!=null&&c.length?r.getRowModel().rows.map(s=>e.jsx(l.Fragment,{children:e.jsx("tr",{"data-state":s.getIsSelected()&&"selected",className:"bg-white border-b",children:s.getVisibleCells().map(t=>e.jsx("td",{className:"px-2 py-2",style:{maxWidth:t.column.getSize(),overflow:"hidden",overflowWrap:"break-word"},children:u(t.column.columnDef.cell,t.getContext())},t.id))},s.id)},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:d.length,className:"h-24 text-center",children:"対象レコード0件"})})})]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 gap-8",children:[e.jsxs("div",{className:"w-12 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),className:"p-1 border border-gray-300 px-2 disabled:opacity-30 select-none cursor-pointer",children:"<"}),e.jsx("button",{onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),className:"p-1 border border-gray-300 px-2 disabled:opacity-30 select-none cursor-pointer",children:">"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-gray-500",children:`${r.getState().pagination.pageIndex+1} / ${r.getPageCount()}`})}),e.jsx("select",{value:r.getState().pagination.pageSize,onChange:s=>r.setPageSize(Number(s.currentTarget.value)),className:"py-2 pr-8 bg-transparent cursor-pointer select-none border-1 border-slate-200 focus:ring-0 focus:border-blue-500 text-sm",children:[10,20,30,50].map(s=>e.jsx("option",{value:s,children:`${s} 行表示`},s))})]})]})})})})},E=l.memo(k);export{E as default};
