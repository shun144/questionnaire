import{r as s,q as U,j as e,Y as S,a as R}from"./app-BQAl0iGL.js";import{A as F}from"./AuthenticatedLayout-C2yL1xyY.js";import{d as L}from"./utils-BorBeWIt.js";import T from"./CreateModal-DIMkvbfi.js";import B from"./EditModal-B9XJB0EV.js";import{CustomToaster as _}from"./CustomToaster-BZSZQMr5.js";import{i as A,p as n,F as D}from"./index-emsHXgiM.js";/* empty css                           */import{n as a}from"./index-BiipNi2k.js";import"./ApplicationLogo-BfYpShb9.js";import"./ResponsiveNavLink-BrXvHy8A.js";import"./transition-C1GdvH3R.js";import"./Modal-Dp7g2Mk1.js";import"./TextInput-4TZb_qHu.js";import"./InputLabel-aPXuP3jf.js";const m="menu-id",q=({initialFlows:r,isRegisteredApiCredential:j})=>{const[d,c]=s.useState(r),[w,u]=s.useState(!1),[g,x]=s.useState(!1),[b,p]=s.useState(""),[M,h]=s.useState(""),[C,N]=s.useState(0),{props:f}=U();s.useEffect(()=>{c(r)},[r]);const{show:y}=D({id:m}),v=s.useCallback(t=>{const l=t.props.flowId,o=t.props.title;confirm(`${o}を削除してよろしいですか？`)&&(async()=>await L(l)?(a.success(`${o}を削除しました`),c(I=>I.filter($=>$.id!==l))):a.error(`${o}の削除に失敗しました`))()},[]),k=s.useCallback(({props:t})=>{p(t.title),h(t.url),N(t.flowId),x(!0)},[p,h]),O=async t=>{try{await navigator.clipboard.writeText(`${window.location.origin}/${f.auth.user.english_name}/${t.props.url}`),a.success("URLをクリップボードにコピーしました",{duration:3e3})}catch{a.error("URLのコピーに失敗しました",{duration:3e3})}},E=(t,l,o,i)=>{y({event:t,props:{flowId:l,title:o,url:i}})};return e.jsxs(F,{header:e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("h2",{className:"font-bold text-xl text-slate-600 leading-tight",children:"アンケート一覧"}),e.jsx("button",{className:"bg-indigo-500 py-2 px-3 text-white rounded shadow transition-all hover:bg-indigo-600",onClick:()=>u(!0),children:"作 成"})]}),children:[e.jsx(S,{title:"Board"}),e.jsx("div",{className:"flex justify-center items-start h-full pt-20",children:d.length>0?e.jsx("div",{className:"grid grid-cols-5 gap-8",children:e.jsx(e.Fragment,{children:d.map(({id:t,title:l,url:o})=>e.jsx(R,{onContextMenu:i=>E(i,t,l,o),href:`flow/${t}`,as:"button",type:"button",className:`w-56 h-40 rounded-lg shadow border inline-block bg-white overflow-hidden select-none
                    hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-slate-200 transition-all duration-300 py-2`,children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx("div",{className:"w-full h-5/6 pt-2",children:e.jsx("div",{className:"px-2 h-full flex flex-col justify-start",children:e.jsx("p",{className:"text-slate-700 text-lg break-all leading-tight text-start",children:l})})}),e.jsx("div",{className:"w-full h-1/6",children:e.jsxs("p",{className:"px-2  text-slate-400 text-[11px] break-all leading-tight text-start",children:[window.location.origin,"/",f.auth.user.english_name,"/",o]})})]})},t))})}):e.jsx("div",{className:"w-full h-full flex justify-center items-start",children:e.jsx("div",{className:"text-3xl font-bold select-none text-slate-400/80",children:"作成ボタンからアンケートを作成してください"})})}),e.jsx(T,{isOpenModal:w,setIsOpenModal:u,isRegisteredApiCredential:j}),e.jsx(B,{isOpenModal:g,setIsOpenModal:x,editTitle:b,editUrl:M,flowId:C}),e.jsx(_,{}),e.jsxs(A,{id:m,children:[e.jsx(n,{closeOnClick:!0,onClick:t=>k(t),children:"タイトル/URLの変更"}),e.jsx(n,{closeOnClick:!0,onClick:t=>O(t),children:"URLのコピー"}),e.jsx(n,{closeOnClick:!0,onClick:t=>v(t),children:"削除"})]})]})},le=s.memo(q);export{le as default};
