import{r as s,q as U,j as e,Y as S,a as R}from"./app-CKUasEkn.js";import{A as F}from"./AuthenticatedLayout-BtOI6QaO.js";import{d as L}from"./utils-DavAxWOk.js";import T from"./CreateModal-BRlEaCoQ.js";import B from"./EditModal-PoC7ao5T.js";import{CustomToaster as _}from"./CustomToaster-Dihp68RB.js";import{i as A,p as d,F as D}from"./index-_ko4gX-A.js";/* empty css                           */import{n as o}from"./index-CEf5u10l.js";import"./ApplicationLogo-DPOX-Gj7.js";import"./ResponsiveNavLink-imQLKcJ9.js";import"./transition-Bop5StqK.js";import"./Modal-Dpijk5eF.js";import"./TextInput-Dtj-0vot.js";import"./InputLabel-CO99aJdj.js";const j="menu-id",q=({initialFlows:a,isRegisteredApiCredential:w})=>{const[c,x]=s.useState(a),[g,u]=s.useState(!1),[b,m]=s.useState(!1),[N,f]=s.useState(""),[M,h]=s.useState(""),[v,y]=s.useState(0),{props:p}=U();s.useEffect(()=>{x(a)},[a]);const{show:C}=D({id:j}),k=s.useCallback(t=>{const l=t.props.flowId,i=t.props.title;confirm(`${i}を削除してよろしいですか？`)&&(async()=>await L(l)?(o.success(`${i}を削除しました`),x(n=>n.filter($=>$.id!==l))):o.error(`${i}の削除に失敗しました`))()},[]),O=s.useCallback(({props:t})=>{f(t.title),h(t.url),y(t.flowId),m(!0)},[f,h]),E=async t=>{try{await navigator.clipboard.writeText(`${window.location.origin}/${p.auth.user.english_name}/${t.props.url}`),o.success("URLをクリップボードにコピーしました",{duration:3e3})}catch{o.error("URLのコピーに失敗しました",{duration:3e3})}},I=(t,l,i,r)=>{C({event:t,props:{flowId:l,title:i,url:r}})};return e.jsxs(F,{header:e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("h2",{className:"font-bold text-xl text-slate-600 leading-tight",children:"診 断 一 覧"}),e.jsx("button",{className:"bg-indigo-500 py-2 px-3 text-white rounded shadow transition-all hover:bg-indigo-600",onClick:()=>u(!0),children:"診 断 作 成"})]}),children:[e.jsx(S,{title:"Board"}),e.jsx("div",{className:"flex justify-center items-start h-full pt-20",children:c.length>0?e.jsx("div",{className:"grid grid-cols-5 gap-8",children:e.jsx(e.Fragment,{children:c.map(({id:t,category:l,title:i,url:r})=>e.jsx(R,{onContextMenu:n=>I(n,t,i,r),href:`flow/${t}`,as:"button",type:"button",className:`w-56 h-48 rounded-lg shadow border inline-block bg-white overflow-hidden select-none\r
                    hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-slate-200 transition-all duration-300 py-2`,children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx("div",{className:"w-full h-1/6 pl-2 flex justify-start items-center",children:e.jsx("div",{className:`${l==="standard"?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-pink-500"} inline-flex rounded-md h-full justify-center items-center text-xs  px-1`,children:l==="standard"?"標準":"シティヘブン"})}),e.jsx("div",{className:"w-full h-4/6 pt-2",children:e.jsx("div",{className:"px-2 h-full flex flex-col justify-start",children:e.jsx("p",{className:"text-slate-700 text-lg break-all leading-tight text-start",children:i})})}),e.jsx("div",{className:"w-full h-1/6",children:e.jsxs("p",{className:"px-2  text-slate-400 text-[11px] break-all leading-tight text-start",children:[window.location.origin,"/",p.auth.user.english_name,"/",r]})})]})},t))})}):e.jsx("div",{className:"w-full h-full flex justify-center items-start",children:e.jsx("div",{className:"text-3xl font-bold select-none text-slate-400/80",children:"診断作成ボタンから診断を作成してください"})})}),e.jsx(T,{isOpenModal:g,setIsOpenModal:u,isRegisteredApiCredential:w}),e.jsx(B,{isOpenModal:b,setIsOpenModal:m,editTitle:N,editUrl:M,flowId:v}),e.jsx(_,{}),e.jsxs(A,{id:j,children:[e.jsx(d,{closeOnClick:!0,onClick:t=>O(t),children:"タイトル/URLの変更"}),e.jsx(d,{closeOnClick:!0,onClick:t=>E(t),children:"URLのコピー"}),e.jsx(d,{closeOnClick:!0,onClick:t=>k(t),children:"削除"})]})]})},le=s.memo(q);export{le as default};
