import{r as a,j as e}from"./app-MNzaSWed.js";import{u as v,H as j,P as w}from"./index-BV5GjtqN.js";import N from"./ChoiceSourceHandle-FwnCs9jg.js";import{showContextMenu as y}from"./QuestionSubMenu-DVgmnkFN.js";import{g as C}from"./utils-DDUM_FvQ.js";import{u as H}from"./store-4eFm_Nke.js";import{c as n,b as h,d as m}from"./constants-zrKFsk20.js";import{G as u}from"./iconBase-C8iXxnql.js";import{B as k}from"./index-Dg3Bogek.js";import"./index-EmrQ07aD.js";import"./react-9o_-8awh.js";function L(s){return u({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(s)}function M(s){return u({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"},child:[]}]})(s)}const V=({id:s,data:l})=>{const d=H(t=>t.firstNodeId),{setEdges:x,updateNodeData:r}=v(),f=a.useCallback(t=>{r(s,{topic:t.currentTarget.value})},[r,s,l]),g=()=>{r(s,{...l,choices:[...l.choices,{id:C(),content:""}]})},p=a.useCallback((t,i)=>{if(l.choices.length>n)return;const o=t.currentTarget.value;r(s,{...l,choices:l.choices.map(c=>c.id===i.id?{...c,content:o}:c)})},[r,s,l]),b=a.useCallback(t=>{l.choices.length<=1||(r(s,{...l,choices:l.choices.filter(i=>i.id!=t.id)}),x(i=>i.filter(o=>o.sourceHandle!=t.id)))},[r,s,l]);return e.jsxs("div",{className:`rounded-md w-96 bg-slate-900 shadow-cyan-100/50 relative  ${d===s?" border-yellow-300 border-4":" border-slate-300 border-2"}`,children:[d===s&&e.jsx("div",{className:"absolute bg-amber-500 w-12 h-8  rounded-full -top-4 -left-6 flex justify-center items-center shadow-lg border-2 border-yellow-300",children:e.jsx("div",{className:"text-white font-bold text-md",children:"1st"})}),e.jsx("div",{className:"h-10 dhandle rounded-t-md bg-indigo-500 flex justify-end items-center px-2 transition-all hover:bg-indigo-600",children:e.jsx(k,{className:"w-6 h-full text-slate-200 text-md cursor-pointer transition-all hover:text-slate-50 hover:bg-indigo-400",onClick:t=>y(t,s)})}),e.jsxs("div",{className:"flex flex-col justify-center items-center cursor-default pt-3 pb-6 px-3",children:[e.jsxs("div",{className:"w-full flex flex-col justify-center items-center relative",children:[e.jsx("label",{htmlFor:"message",className:"self-start block text-md font-semibold text-indigo-500",children:`質 問（${h}文字）`}),e.jsx("textarea",{id:"message",rows:3,className:"block resize-none p-2.5 w-full text-slate-200 placeholder-slate-500 bg-slate-800 rounded-sm border-1 ring-0 border-slate-400 focus:ring-0 focus:border-slate-200",value:l.topic,maxLength:h,placeholder:"質問内容を入力してください",onChange:t=>f(t)}),e.jsx(j,{id:s,position:w.Left,type:"target",style:{cursor:"pointer",top:18,left:-25}})]}),e.jsxs("div",{className:"w-full flex flex-col justify-center items-center pt-6",children:[e.jsx("div",{className:"self-start block text-md font-semibold text-indigo-500",children:`選 択 肢（${m}文字/${n}項目）`}),l.choices.map((t,i)=>e.jsxs("div",{className:`w-full relative ${i!=l.choices.length-1&&"pb-6"}`,children:[e.jsxs("div",{className:"w-full flex justify-between",children:[e.jsx("input",{className:"w-full text-sm hover:shadow text-slate-200  placeholder-slate-500 bg-slate-800 rounded-sm border-1 ring-0 border-slate-400 focus:ring-0 focus:border-slate-200",value:t.content,placeholder:"選択肢を入力してください",maxLength:m,onChange:o=>p(o,t)}),e.jsx("button",{className:"text-center text-slate-600 transition-all hover:text-red-300 px-1",type:"button",onClick:()=>b(t),children:e.jsx(M,{className:"text-sm"})})]}),e.jsx(N,{id:t.id,connectionLimit:1,style:{top:18,right:-25}})]},t.id))]}),e.jsx("div",{className:"w-full mt-4",children:l.choices.length<n&&e.jsxs("button",{className:"text-indigo-600 border border-indigo-600 hover:text-indigo-300 hover:border-indigo-300 font-bold mt-1 w-full text-[0.8rem] py-1 flex justify-center items-center gap-1 transition-all",onClick:()=>g(),children:[e.jsx(L,{}),e.jsx("p",{children:"選択肢追加"})]})})]})]})},S=a.memo(V);export{S as default};
