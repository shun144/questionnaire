import{r as t,q as $,j as o}from"./app-MNzaSWed.js";import{d as F}from"./utils-DDUM_FvQ.js";import{i as R,p as c,F as b}from"./index-EmrQ07aD.js";import{n}from"./index-CNJg2eKG.js";import y from"./EditModal-0pRSsnKU.js";import"./Modal-B9xBiJ3b.js";import"./transition-DnuR3wA2.js";import"./TextInput-BbtmlFoK.js";import"./InputLabel-DbN61rcf.js";const h="board-menu",{show:I}=b({id:h}),N=(i,a,r,l)=>{I({event:i,props:{flowId:a,title:r,url:l}})},L=({setFlows:i})=>{const[a,r]=t.useState(""),[l,d]=t.useState(""),[f,p]=t.useState(0),[x,u]=t.useState(!1),{props:E}=$(),M=E.auth.user.english_name,C=t.useMemo(()=>"http://127.0.0.1:8000",[]),k=t.useCallback(({props:{flowId:e,title:s}})=>{confirm(`${s}を削除してよろしいですか？`)&&(async()=>await F(e)?(n.success(`${s}を削除しました`),i(w=>w.filter(O=>O.id!==e))):n.error(`${s}の削除に失敗しました`))()},[]),U=t.useCallback(({props:{title:e,url:s,flowId:m}})=>{r(e),d(s),p(m),u(!0)},[r,d,p]),j=t.useCallback(async({props:{url:e}})=>{try{const s=`${C}/${M}/${e}`;await navigator.clipboard.writeText(s),n.success("URLをクリップボードにコピーしました",{duration:3e3})}catch{n.error("URLのコピーに失敗しました",{duration:3e3})}},[]);return o.jsxs(o.Fragment,{children:[o.jsxs(R,{id:h,children:[o.jsx(c,{closeOnClick:!0,onClick:e=>U(e),children:"タイトル/URLの変更"}),o.jsx(c,{closeOnClick:!0,onClick:e=>j(e),children:"URLのコピー"}),o.jsx(c,{closeOnClick:!0,onClick:e=>k(e),children:"削除"})]}),o.jsx(y,{isOpenModal:x,setIsOpenModal:u,editTitle:a,editUrl:l,flowId:f})]})},z=t.memo(L);export{z as default,N as displayMenu};
